# 安徽招生数据处理经验总结

## 一、 数据处理总流程视图

```
原始图片 → OCR识别 → Markdown文件 → 解析处理 → Excel输出
   ↓           ↓            ↓            ↓           ↓
 PNG/JPG   百度API      .md文件    process_anhui.py  .xlsx
```

---

## 二、 核心解析与识别模型

### 1. 三段式特征识别 (与锚点)
*   **起手位：业务代码**。行首的多位数字。正则特征：`r"^\d{2,4}\s+"`。
*   **中场位：描述内容**。采用非贪婪匹配。
*   **收官位：人数锚点**。标志位：`r"\d+\s*人"`。
    *   **备注流抓取**：条目识别不以换行结束，而是直读到所有备注括号（无论嵌套或连续）完全闭合位置。

### 2. 院校与专业组自动合并
*   **逻辑**：当 4 位院校行（无人数）紧随 3 位专业组行（有人数）时，系统自动锁定并合入一个条目。

---

## 三、 特殊场景：跨页断行处理 (Page 05/06)

*   **识别**：上一页末尾有代码无人数，下一页起始有括号及人数。
*   **准则**：脚本分两行保留，**操作员必须在 Excel 中手动执行物理合并**。

---

## 四、 质量检验清单 (QA Checklist)

### 1. 处理前检查
- [ ] 确保 `(venv)` 已激活。
- [ ] 检查 MD 文件表头文字是否包含“填报志愿注意事项”（已知高危区）。

### 2. 处理后验证
- [ ] **行数对齐**：Excel 数据行数应接近 MD 有效行数。
- [ ] **数据完整性**：抽查院校代码（4位）和专业代码（2位）是否齐全。
- [ ] **跨页补全**：手动合并代码为空的“残片行”。

---

## 五、 测试结果总结 (2026-01-24 存档)

### 安徽历史组
| 页面    | 状态 | 备注                           |
| :------ | :--- | :----------------------------- |
| 001-002 | ✅    | HTML 标准表格模式              |
| 003-005 | ✅    | 专业行已找回，说明文字过滤正确 |
| 006     | ✅    | 跨页延续数据已安全保留         |

### 安徽物理组
| 页面    | 状态 | 备注                      |
| :------ | :--- | :------------------------ |
| 001-005 | ✅    | 全量通过 (PaddleOCR 模型) |

---

## 六、 潜在风险预警

*   **OCR 混淆**：警惕 `0` 与 `O`、`1` 与 `l`、`8` 与 `B` 的识别错误。
*   **新格式冲击**：如遇新的三列布局，需先查看 MD 原件决定是否加新正则。
*   **红线原则**：宁可保留处理噪音，也决不丢失一条原表招生数据。

---

**版本**: v2.0 (2026-01-24)  
**维护**: 深度整合了 24H 修复 Page 04/05/06 的所有实战数据。
