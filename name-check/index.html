<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ËØæÂ†ÇÁÇπÂêçÁ≠æÂà∞Á≥ªÁªü</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/earth.css">
</head>
<body>
    <div class="app-container">
        <!-- ËÉåÊôØÂú∞ÁêÉÂä®Áîª -->
        <div class="earth-container">
            <div class="earth">
                <div class="earth-surface"></div>
                <div class="earth-grid"></div>
            </div>
        </div>

        <!-- ‰∏ªÂ∫îÁî®ÁïåÈù¢ -->
        <div class="main-app">
            <!-- Â§¥ÈÉ®ÂØºËà™ -->
            <header class="app-header">
                <h1 class="app-title">
                    <span class="earth-icon">üåç</span>
                    ËØæÂ†ÇÁÇπÂêçÁ≠æÂà∞Á≥ªÁªü
                </h1>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-label">‰ªäÊó•Âá∫Âã§Áéá</span>
                        <span class="stat-value" id="todayAttendanceRate">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Â≠¶ÁîüÊÄªÊï∞</span>
                        <span class="stat-value" id="totalStudents">0</span>
                    </div>
                </div>
            </header>

            <!-- ÂØºËà™Ê†áÁ≠æ -->
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="attendance">ÁÇπÂêçÁ≠æÂà∞</button>
                <button class="tab-btn" data-tab="roster">Â≠¶ÁîüÂêçÂçï</button>
                <button class="tab-btn" data-tab="random">ÈöèÊú∫ÁÇπÂêç</button>
                <button class="tab-btn" data-tab="records">ËÄÉÂã§ËÆ∞ÂΩï</button>
                <button class="tab-btn" data-tab="export">ÂØºÂá∫Êï∞ÊçÆ</button>
            </nav>

            <!-- ÂÜÖÂÆπÂå∫Âüü -->
            <main class="content-area">
                <!-- ÁÇπÂêçÁ≠æÂà∞È°µÈù¢ -->
                <div class="tab-content active" id="attendance-tab">
                    <div class="attendance-container">
                        <div class="attendance-header">
                            <h2>‰ªäÊó•ËÄÉÂã§</h2>
                            <div class="date-info">
                                <span id="currentDate"></span>
                            </div>
                            <div class="attendance-buttons" id="attendanceButtons">
                                <!-- ËÄÉÂã§ÊåâÈíÆÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                            </div>
                        </div>
                        <div class="attendance-grid" id="attendanceGrid">
                            <!-- Â≠¶ÁîüÂàóË°®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                        </div>
                    </div>
                </div>

                <!-- Â≠¶ÁîüÂêçÂçïÈ°µÈù¢ -->
                <div class="tab-content" id="roster-tab">
                    <div class="roster-container">
                        <div class="roster-header">
                            <h2>Â≠¶ÁîüÂêçÂçïÁÆ°ÁêÜ</h2>
                            <div class="roster-stats">
                                <span class="student-count">ÂÖ± <strong id="totalStudentCount">0</strong> ÂêçÂ≠¶Áîü</span>
                            </div>
                        </div>
                        <div class="roster-toolbar">
                            <div class="search-bar">
                                <input type="text" id="studentSearch" placeholder="ÊêúÁ¥¢Â≠¶ÁîüÂßìÂêçÊàñÂ≠¶Âè∑...">
                            </div>
                            <div class="batch-actions" id="batchActions" style="display: none;">
                                <button class="btn btn-secondary btn-small" id="selectAllBtn">ÂÖ®ÈÄâ</button>
                                <button class="btn btn-secondary btn-small" id="deselectAllBtn">ÂèñÊ∂àÂÖ®ÈÄâ</button>
                                <button class="btn btn-danger btn-small" id="batchDeleteBtn">ÊâπÈáèÂà†Èô§</button>
                            </div>
                        </div>
                        <div class="roster-actions">
                            <button class="btn btn-secondary" id="importBtn">ÂØºÂÖ•CSV</button>
                            <button class="btn btn-primary" id="addStudentBtn">Ê∑ªÂä†Â≠¶Áîü</button>
                            <button class="btn btn-danger" id="clearDataBtn">Ê∏ÖÈô§ÊâÄÊúâÊï∞ÊçÆ</button>
                        </div>
                        <div class="roster-list" id="rosterList">
                            <!-- Â≠¶ÁîüÂàóË°®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                        </div>
                    </div>
                </div>

                <!-- ÈöèÊú∫ÁÇπÂêçÈ°µÈù¢ -->
                <div class="tab-content" id="random-tab">
                    <div class="random-container">
                        <div class="random-header">
                            <h2>ÈöèÊú∫ÁÇπÂêç</h2>
                            <div class="random-settings">
                                <label>ÈÄâÊã©‰∫∫Êï∞Ôºö</label>
                                <select id="selectCount">
                                    <option value="1">1‰∫∫</option>
                                    <option value="2">2‰∫∫</option>
                                    <option value="3" selected>3‰∫∫</option>
                                    <option value="5">5‰∫∫</option>
                                </select>
                            </div>
                        </div>
                        <div class="random-display">
                            <div class="earth-viewer">
                                <div class="selection-earth"></div>
                                <div class="selected-names" id="selectedNames"></div>
                            </div>
                            <button class="btn btn-primary btn-large" id="randomSelectBtn">
                                <span class="btn-text">ÂºÄÂßãÈöèÊú∫ÈÄâÊã©</span>
                                <span class="btn-icon">üé≤</span>
                            </button>
                        </div>
                        <div class="random-history">
                            <h3>ÂéÜÂè≤ËÆ∞ÂΩï</h3>
                            <div class="history-list" id="randomHistory"></div>
                        </div>
                    </div>
                </div>

                <!-- ËÄÉÂã§ËÆ∞ÂΩïÈ°µÈù¢ -->
                <div class="tab-content" id="records-tab">
                    <div class="records-container">
                        <div class="records-header">
                            <h2>ËÄÉÂã§ËÆ∞ÂΩï</h2>
                            <div class="filter-controls">
                                <input type="date" id="startDate">
                                <span>Ëá≥</span>
                                <input type="date" id="endDate">
                                <button class="btn btn-secondary" id="filterBtn">Á≠õÈÄâ</button>
                            </div>
                        </div>
                        <div class="records-stats">
                            <div class="stat-card">
                                <h4>Âπ≥ÂùáÂá∫Âã§Áéá</h4>
                                <p class="stat-value" id="avgAttendanceRate">-</p>
                            </div>
                            <div class="stat-card">
                                <h4>ËøüÂà∞Ê¨°Êï∞</h4>
                                <p class="stat-value" id="totalTardyCount">-</p>
                            </div>
                            <div class="stat-card">
                                <h4>Áº∫Âã§Ê¨°Êï∞</h4>
                                <p class="stat-value" id="totalAbsentCount">-</p>
                            </div>
                        </div>
                        <div class="records-table">
                            <table id="recordsTable">
                                <thead>
                                    <tr>
                                        <th>Êó•Êúü</th>
                                        <th>Â≠¶ÁîüÂßìÂêç</th>
                                        <th>Áä∂ÊÄÅ</th>
                                        <th>Á≠æÂà∞Êó∂Èó¥</th>
                                        <th>ËøüÂà∞ÂàÜÈíü</th>
                                        <th>Â§áÊ≥®</th>
                                    </tr>
                                </thead>
                                <tbody id="recordsTableBody">
                                    <!-- ËÆ∞ÂΩïÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ÂØºÂá∫Êï∞ÊçÆÈ°µÈù¢ -->
                <div class="tab-content" id="export-tab">
                    <div class="export-container">
                        <div class="export-header">
                            <h2>ÂØºÂá∫Êï∞ÊçÆ</h2>
                        </div>
                        <div class="export-options">
                            <div class="option-group">
                                <h3>Êó∂Èó¥ËåÉÂõ¥</h3>
                                <div class="date-range">
                                    <input type="date" id="exportStartDate">
                                    <span>Ëá≥</span>
                                    <input type="date" id="exportEndDate">
                                </div>
                            </div>
                            <div class="option-group">
                                <h3>ÂØºÂá∫ÂÜÖÂÆπ</h3>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" id="exportAttendance" checked> ËÄÉÂã§ËÆ∞ÂΩï</label>
                                    <label><input type="checkbox" id="exportStudents"> Â≠¶ÁîüÂêçÂçï</label>
                                    <label><input type="checkbox" id="exportStatistics"> ÁªüËÆ°‰ø°ÊÅØ</label>
                                </div>
                            </div>
                            <div class="option-group">
                                <h3>ÂØºÂá∫Ê†ºÂºè</h3>
                                <div class="radio-group">
                                    <label><input type="radio" name="format" value="csv" checked> CSV</label>
                                    <label><input type="radio" name="format" value="json"> JSON</label>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary btn-large" id="exportBtn">ÂØºÂá∫Êï∞ÊçÆ</button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Ê®°ÊÄÅÊ°Ü -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Ê†áÈ¢ò</h3>
                <button class="modal-close" id="modalClose">√ó</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Ê®°ÊÄÅÊ°ÜÂÜÖÂÆπ -->
            </div>
        </div>
    </div>

    <!-- ÂØºÂÖ•CSVÁöÑÈöêËóèinput -->
    <input type="file" id="csvFileInput" accept=".csv" style="display: none;">

    <!-- JavaScriptÊñá‰ª∂ -->
    <script src="js/config/settings.js"></script>
    <script src="js/utils/date-utils.js"></script>
    <script src="js/utils/csv-parser.js"></script>
    <script src="js/utils/statistics.js"></script>
    <script src="js/storage/storage-manager.js"></script>
    <script src="js/models/student.js"></script>
    <script src="js/models/attendance.js"></script>
    <script src="js/models/session.js"></script>
    <script src="js/services/attendance-service.js"></script>
    <script src="js/services/import-service.js"></script>
    <script src="js/services/export-service.js"></script>
    <script src="js/services/selection-service.js"></script>
    <script src="js/components/earth-viewer.js"></script>
    <script src="js/components/roster-manager.js"></script>
    <script src="js/components/attendance-tracker.js"></script>
    <script src="js/components/random-selector.js"></script>
    <script src="js/components/records-viewer.js"></script>
    <script src="js/components/export-manager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>