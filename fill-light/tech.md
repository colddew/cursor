# å¥¶é¾™è¡¥å…‰ç¯ - æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£

## ä¸€ã€ç¯å¢ƒçº¦æŸ

### 1.1 å¼€å‘ç¯å¢ƒ

```
å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ macOS: 12.7.6 (Monterey)
â”œâ”€â”€ Xcode: 14.2
â”œâ”€â”€ Swift: 5.7+
â”œâ”€â”€ æµ‹è¯•è®¾å¤‡: iPhone 13 Pro (æœ€é«˜æ”¯æŒ iOS 17)
â””â”€â”€ æœ€ä½æ”¯æŒ: iOS 16.0
```

### 1.2 ç‰ˆæœ¬å…¼å®¹æ€§

| ç»„ä»¶ | ç‰ˆæœ¬é™åˆ¶ | è¯´æ˜ |
|------|---------|------|
| iOS æœ€ä½ç‰ˆæœ¬ | 16.0 | Xcode 14.2 ç¨³å®šæ”¯æŒ |
| iOS æœ€é«˜ç‰ˆæœ¬ | 17.x | iPhone 13 Pro æ”¯æŒ |
| SwiftUI | 4.0+ | iOS 16 ç‰¹æ€§ |
| NavigationView | âœ… å¯ç”¨ | æ›¿ä»£ iOS 17 çš„ NavigationStack |
| @FetchRequest | âœ… å¯ç”¨ | Core Data é›†æˆ |

### 1.3 æŠ€æœ¯é™åˆ¶

```
ä¸å¯ç”¨ç‰¹æ€§ï¼ˆiOS 17+ï¼‰
â”œâ”€â”€ NavigationStack â”€â”€â”€â”€â†’ ä½¿ç”¨ NavigationView
â”œâ”€â”€ ObservableMacro â”€â”€â”€â†’ ä½¿ç”¨ ObservableObject
â”œâ”€â”€ @Observable â”€â”€â”€â”€â”€â”€â†’ ä½¿ç”¨ @Published
â””â”€â”€ .scrollIndicators â”€â†’ ä½¿ç”¨ UIScrollViewAppearance

å¯ç”¨ç‰¹æ€§ï¼ˆiOS 16ï¼‰
â”œâ”€â”€ NavigationView
â”œâ”€â”€ @StateObject + @Published
â”œâ”€â”€ @FocusState
â”œâ”€â”€ @FetchRequest
â”œâ”€â”€ TimelineView
â”œâ”€â”€ Canvas
â””â”€â”€ MaterialEffects
```

---

## äºŒã€æŠ€æœ¯é€‰å‹

### 2.1 æŠ€æœ¯æ ˆæ¦‚è§ˆ

```
æ ¸å¿ƒæŠ€æœ¯æ ˆ
â”œâ”€â”€ è¯­è¨€: Swift 5.7+
â”œâ”€â”€ æœ€ä½æ”¯æŒ: iOS 16.0
â”œâ”€â”€ æœ€é«˜æ”¯æŒ: iOS 17.x
â”œâ”€â”€ UIæ¡†æ¶: SwiftUI 4.0 + UIKit æ··åˆ
â”œâ”€â”€ çŠ¶æ€ç®¡ç†: Combine + @Published + ObservableObject
â”œâ”€â”€ ç›¸æœºåŠŸèƒ½: AVFoundation
â”œâ”€â”€ åŠ¨ç”»å¼•æ“: Core Animation + SwiftUI Animation
â”œâ”€â”€ è§¦è§‰åé¦ˆ: Core Haptics
â””â”€â”€ æ•°æ®æŒä¹…åŒ–: UserDefaults (è½»é‡çº§)
```

### 2.2 æ¡†æ¶é€‰æ‹©ç†ç”±

| æ¡†æ¶ | ç‰ˆæœ¬ | ä½¿ç”¨åœºæ™¯ | ç†ç”± |
|------|------|---------|------|
| **SwiftUI** | 4.0+ | ä¸»è¦UIå¼€å‘ | å£°æ˜å¼è¯­æ³•ã€å®æ—¶é¢„è§ˆã€åŸç”ŸåŠ¨ç”»æ”¯æŒ |
| **UIKit** | - | ç›¸æœºé¢„è§ˆã€å¤æ‚æ‰‹åŠ¿ | æ€§èƒ½æè‡´ã€ç»†ç²’åº¦æ§åˆ¶ |
| **Combine** | - | çŠ¶æ€ç®¡ç† | åŸç”Ÿå“åº”å¼ã€ç±»å‹å®‰å…¨ |
| **AVFoundation** | - | ç›¸æœºåŠŸèƒ½ | å®˜æ–¹ç›¸æœºæ¡†æ¶ã€åŠŸèƒ½å®Œæ•´ |
| **Core Animation** | - | é«˜çº§åŠ¨ç”» | æ€§èƒ½æœ€ä¼˜ã€GPUåŠ é€Ÿ |
| **Core Haptics** | - | è§¦è§‰åé¦ˆ | åŸç”Ÿéœ‡åŠ¨åé¦ˆ |

### 2.3 æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | iOS 16å…¼å®¹ | è®¾è®¡è¡¨ç°åŠ› | å¼€å‘æ•ˆç‡ | æ€§èƒ½ | æ¨èåº¦ |
|------|-----------|-----------|---------|------|--------|
| **SwiftUI + UIKitæ··åˆ** | âœ… å®Œç¾ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | ğŸ† æœ€æ¨è |
| çº¯SwiftUI | âœ… å®Œç¾ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ | âœ… æ¨è |
| çº¯UIKit | âœ… å®Œç¾ | â­â­â­â­â­ | â­â­â­ | â­â­â­â­â­ | âš ï¸ æ•ˆç‡ä½ |

---

## ä¸‰ã€æ¶æ„è®¾è®¡

### 3.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Presentation Layer                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SwiftUI â”‚  â”‚ SwiftUI â”‚  â”‚ SwiftUI â”‚  â”‚ UIKit â”‚ â”‚
â”‚  â”‚  Views  â”‚  â”‚Componentsâ”‚  â”‚ Animationsâ”‚ â”‚Views â”‚ â”‚
â”‚  â”‚ (iOS16+) â”‚  â”‚ (iOS16+) â”‚  â”‚ (iOS16+) â”‚  â”‚       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ViewModel Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Camera     â”‚  â”‚   Light      â”‚  â”‚   Settings   â”‚ â”‚
â”‚  â”‚  ViewModel   â”‚  â”‚  ViewModel   â”‚  â”‚  ViewModel   â”‚ â”‚
â”‚  â”‚ObservableObjâ”‚  â”‚ObservableObjâ”‚  â”‚ObservableObjâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                           â†“                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Model Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Camera   â”‚  â”‚  Light   â”‚  â”‚ Dragon   â”‚  â”‚ AppStateâ”‚ â”‚
â”‚  â”‚  Model   â”‚  â”‚  Model   â”‚  â”‚  Model   â”‚  â”‚        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Service Layer                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Camera      â”‚  â”‚   Haptics    â”‚  â”‚   Settings   â”‚ â”‚
â”‚  â”‚  Service     â”‚  â”‚   Service    â”‚  â”‚   Service    â”‚ â”‚
â”‚  â”‚  (Singleton) â”‚  â”‚  (Singleton) â”‚  â”‚  (Singleton) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æŒä¹…åŒ–: UserDefaults
å¼‚æ­¥å¤„ç†: Combine + DispatchQueue
ç›¸æœºå¤„ç†: AVFoundation (ä¸“ç”¨ä¸²è¡Œé˜Ÿåˆ—)
```

### 3.2 MVVM + Service æ¶æ„è¯´æ˜

```
MVVM èŒè´£åˆ’åˆ†
â”œâ”€â”€ Model
â”‚   â”œâ”€â”€ æ•°æ®ç»“æ„å®šä¹‰
â”‚   â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘æ— å…³çš„çº¯æ•°æ®
â”‚   â””â”€â”€ ç¤ºä¾‹: LightColor, Settings, DragonState
â”‚
â”œâ”€â”€ View
â”‚   â”œâ”€â”€ SwiftUI è§†å›¾ç»„ä»¶
â”‚   â”œâ”€â”€ è´Ÿè´£ UI æ¸²æŸ“å’Œç”¨æˆ·äº¤äº’
â”‚   â”œâ”€â”€ ä½¿ç”¨ @StateObject æŒæœ‰ ViewModel
â”‚   â””â”€â”€ ç¤ºä¾‹: DragonView, ColorPicker, CameraView
â”‚
â”œâ”€â”€ ViewModel
â”‚   â”œâ”€â”€ ä½¿ç”¨ @ObservableObject + @Published
â”‚   â”œâ”€â”€ è¿æ¥ Model å’Œ View
â”‚   â”œâ”€â”€ å¤„ç† UI é€»è¾‘
â”‚   â”œâ”€â”€ åè°ƒ Service è°ƒç”¨
â”‚   â””â”€â”€ ç¤ºä¾‹: LightViewModel, CameraViewModel
â”‚
â””â”€â”€ Service
    â”œâ”€â”€ å•ä¾‹æ¨¡å¼ç®¡ç†
    â”œâ”€â”€ è´Ÿè´£ï¼šç›¸æœºã€è§¦è§‰ã€å­˜å‚¨ç­‰åº•å±‚æœåŠ¡
    â”œâ”€â”€ æä¾› Combine Publisher
    â””â”€â”€ ç¤ºä¾‹: CameraService, HapticService, SettingsService
```

### 3.3 é¡¹ç›®ç»“æ„

```
DragonLight/
â”œâ”€â”€ DragonLight/
â”‚   â”œâ”€â”€ DragonLightApp.swift              â”€ Appå…¥å£ (@main)
â”‚   â”œâ”€â”€ Info.plist                        â”€ é…ç½®æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ Core/                             â”€ æ ¸å¿ƒå±‚
â”‚   â”‚   â”œâ”€â”€ Design/                       â”€ è®¾è®¡ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ AppDesign.swift           â”€ è®¾è®¡è§„èŒƒ(å‘½åç©ºé—´)
â”‚   â”‚   â”‚   â”œâ”€â”€ Colors.swift              â”€ é¢œè‰²æ‰©å±•
â”‚   â”‚   â”‚   â”œâ”€â”€ Fonts.swift               â”€ å­—ä½“æ‰©å±•
â”‚   â”‚   â”‚   â”œâ”€â”€ Spacing.swift             â”€ é—´è·è§„èŒƒ
â”‚   â”‚   â”‚   â””â”€â”€ Animations.swift          â”€ åŠ¨ç”»è§„èŒƒ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Models/                       â”€ æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ LightColor.swift          â”€ è¡¥å…‰é¢œè‰²æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ DragonState.swift         â”€ å¥¶é¾™çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings.swift            â”€ è®¾ç½®æ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ CameraState.swift         â”€ ç›¸æœºçŠ¶æ€
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ViewModels/                   â”€ è§†å›¾æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ LightViewModel.swift      â”€ è¡¥å…‰é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ CameraViewModel.swift     â”€ ç›¸æœºé€»è¾‘
â”‚   â”‚   â”‚   â””â”€â”€ SettingsViewModel.swift   â”€ è®¾ç½®é€»è¾‘
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Services/                     â”€ æœåŠ¡å±‚
â”‚   â”‚       â”œâ”€â”€ CameraService.swift       â”€ ç›¸æœºæœåŠ¡(å•ä¾‹)
â”‚   â”‚       â”œâ”€â”€ HapticService.swift       â”€ è§¦è§‰æœåŠ¡(å•ä¾‹)
â”‚   â”‚       â”œâ”€â”€ SettingsService.swift     â”€ è®¾ç½®æœåŠ¡(å•ä¾‹)
â”‚   â”‚       â””â”€â”€ PhotoService.swift        â”€ ç…§ç‰‡å¤„ç†æœåŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ Features/                         â”€ åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Camera/                       â”€ ç›¸æœºæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ Views/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CameraPreviewView.swift
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UIViewRepresentable (AVCaptureVideoPreviewLayer)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CaptureButton.swift
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CameraSwitchButton.swift
â”‚   â”‚   â”‚   â””â”€â”€ ViewModels/
â”‚   â”‚   â”‚       â””â”€â”€ CameraViewModel.swift
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Light/                        â”€ è¡¥å…‰æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ Views/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LightColorPicker.swift â”€ é¢œè‰²é€‰æ‹©å™¨ (LazyVGrid)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BrightnessSlider.swift â”€ äº®åº¦æ»‘å—
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LightControlView.swift
â”‚   â”‚   â”‚   â”œâ”€â”€ Components/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ColorGridCell.swift   â”€ é¢œè‰²æ ¼å­
â”‚   â”‚   â”‚   â””â”€â”€ Models/
â”‚   â”‚   â”‚       â””â”€â”€ LightColor.swift
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Dragon/                       â”€ å¥¶é¾™æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ Views/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DragonView.swift      â”€ å¥¶é¾™å®¹å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DragonBody.swift      â”€ èº«ä½“ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DragonFace.swift      â”€ è„¸éƒ¨ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DragonEye.swift       â”€ çœ¼ç›ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LanternView.swift     â”€ ç¯ç¬¼ (æ—‹è½¬åŠ¨ç”»)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SealView.swift        â”€ å°ç«  (ç‚¹å‡»æ•ˆæœ)
â”‚   â”‚   â”‚   â”œâ”€â”€ Components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DragonAnimator.swift  â”€ åŠ¨ç”»çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LanternShaker.swift   â”€ æ‘‡æ™ƒåŠ¨ç”»
â”‚   â”‚   â”‚   â””â”€â”€ Models/
â”‚   â”‚   â”‚       â””â”€â”€ DragonState.swift
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Settings/                     â”€ è®¾ç½®æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ Views/
â”‚   â”‚       â”‚   â”œâ”€â”€ SettingsMenu.swift    â”€ è®¾ç½®èœå• (overlay)
â”‚   â”‚       â”‚   â””â”€â”€ SettingsToggle.swift  â”€ å¼€å…³ç»„ä»¶
â”‚   â”‚       â””â”€â”€ ViewModels/
â”‚   â”‚           â””â”€â”€ SettingsViewModel.swift
â”‚   â”‚
â”‚   â”œâ”€â”€ Shared/                           â”€ å…±äº«ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Components/
â”‚   â”‚   â”‚   â”œâ”€â”€ GlassCard.swift           â”€ æ¯›ç»ç’ƒå¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ PrimaryButton.swift       â”€ ä¸»æŒ‰é’®
â”‚   â”‚   â”‚   â””â”€â”€ SecondaryButton.swift     â”€ æ¬¡æŒ‰é’®
â”‚   â”‚   â””â”€â”€ Extensions/
â”‚   â”‚       â”œâ”€â”€ Color+Hex.swift           â”€ é¢œè‰²åå…­è¿›åˆ¶æ‰©å±•
â”‚   â”‚       â”œâ”€â”€ View+Extensions.swift     â”€ View æ‰©å±•
â”‚   â”‚       â”œâ”€â”€ Font+Extensions.swift     â”€ å­—ä½“æ‰©å±•
â”‚   â”‚       â””â”€â”€ View+Modifiers.swift      â”€ é€šç”¨ä¿®é¥°ç¬¦
â”‚   â”‚
â”‚   â””â”€â”€ Resources/                        â”€ èµ„æºæ–‡ä»¶
â”‚       â”œâ”€â”€ Assets.xcassets/              â”€ å›¾ç‰‡èµ„æº
â”‚       â”‚   â”œâ”€â”€ Dragon/                   â”€ å¥¶é¾™ç´ æ
â”‚       â”‚   â”‚   â”œâ”€â”€ dragon_body.imageset
â”‚       â”‚   â”‚   â”œâ”€â”€ dragon_face.imageset
â”‚       â”‚   â”‚   â”œâ”€â”€ dragon_blink.imageset
â”‚       â”‚   â”‚   â””â”€â”€ dragon_jump.imageset
â”‚       â”‚   â”œâ”€â”€ Lantern/                  â”€ ç¯ç¬¼ç´ æ
â”‚       â”‚   â”‚   â”œâ”€â”€ lantern.imageset
â”‚       â”‚   â”‚   â””â”€â”€ lantern_glow.imageset
â”‚       â”‚   â”œâ”€â”€ Seal/                     â”€ å°ç« ç´ æ
â”‚       â”‚   â”‚   â””â”€â”€ seal_background.imageset
â”‚       â”‚   â””â”€â”€ Colors/                   â”€ é¢œè‰²å›¾æ ‡
â”‚       â”‚       â”œâ”€â”€ color_rouge.imageset
â”‚       â”‚       â””â”€â”€ ...
â”‚       â”‚
â”‚       â””â”€â”€ Fonts/                        â”€ è‡ªå®šä¹‰å­—ä½“
â”‚           â”œâ”€â”€ STKaiti.ttf               â”€ æ¥·ä½“
â”‚           â””â”€â”€ Info.plist (å­—ä½“å£°æ˜)
â”‚
â”œâ”€â”€ DragonLightTests/                    â”€ å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ LightViewModelTests.swift
â”‚   â”œâ”€â”€ CameraServiceTests.swift
â”‚   â””â”€â”€ Models/
â”‚       â””â”€â”€ LightColorTests.swift
â”‚
â””â”€â”€ DragonLightUITests/                  â”€ UIæµ‹è¯•
    â””â”€â”€ LightControlViewTests.swift
```

### 3.4 æ•°æ®æµè®¾è®¡

```
ç”¨æˆ·äº¤äº’ â†’ View â†’ ViewModel â†’ Service â†’ åº•å±‚API
                   â†“                   â†“
              Modelæ›´æ–°          Publisherå‘å¸ƒ
                   â†“                   â†“
              @Published â† Combine â† æ•°æ®è¿”å›
                   â†“
              Viewè‡ªåŠ¨åˆ·æ–°
```

---

## å››ã€æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 4.1 è®¾è®¡ç³»ç»Ÿ (AppDesign)

```
AppDesign å‘½åç©ºé—´è®¾è®¡
â”œâ”€â”€ Colors (é™æ€ç»“æ„ä½“)
â”‚   â”œâ”€â”€ å›½æ½®è‰²ç›˜: rouge, è—¤é»„, apricot, æœˆç™½, å¤©é’, ç«¹é’, é»›è“, é›é’
â”‚   â”œâ”€â”€ ç•Œé¢ä¸»è‰²: background, primary, secondary
â”‚   â””â”€â”€ è¯­ä¹‰åŒ–é¢œè‰²: lanternRed, sealRed, gold
â”‚
â”œâ”€â”€ Typography (é™æ€ç»“æ„ä½“)
â”‚   â”œâ”€â”€ largeTitle, title, headline, body, callout, caption
â”‚   â”œâ”€â”€ seal (æ¥·ä½“)
â”‚   â””â”€â”€ mono (ç­‰å®½)
â”‚
â”œâ”€â”€ Spacing (æšä¸¾)
â”‚   â””â”€â”€ xs, sm, md, lg, xl, xxl (CGFloat)
â”‚
â”œâ”€â”€ CornerRadius (æšä¸¾)
â”‚   â””â”€â”€ sm, md, lg, circle (CGFloat)
â”‚
â”œâ”€â”€ AnimationDuration (æšä¸¾)
â”‚   â””â”€â”€ fast, normal, slow (Double)
â”‚
â””â”€â”€ AnimationCurve (å‘½åç©ºé—´)
    â”œâ”€â”€ easeOut, easeInOut, spring, bouncy
    â””â”€â”€ è¿”å› Animation ç±»å‹

ä½¿ç”¨æ–¹å¼:
AppDesign.Colors.rouge
AppDesign.Typography.body
AppDesign.Spacing.md
AppDesign.AnimationCurve.spring
```

### 4.2 ç›¸æœºæ¨¡å—æ¶æ„

```
CameraService (å•ä¾‹)
â”œâ”€â”€ èŒè´£
â”‚   â”œâ”€â”€ ç®¡ç† AVCaptureSession
â”‚   â”œâ”€â”€ å¤„ç†ç›¸æœºåˆ‡æ¢
â”‚   â”œâ”€â”€ æ‰§è¡Œæ‹ç…§æ“ä½œ
â”‚   â””â”€â”€ å‘å¸ƒç…§ç‰‡ç»“æœ (Publisher)
â”‚
â”œâ”€â”€ æ ¸å¿ƒå±æ€§
â”‚   â”œâ”€â”€ @Published var photoImage: UIImage?
â”‚   â”œâ”€â”€ @Published var isSessionRunning: Bool
â”‚   â””â”€â”€ @Published var cameraPosition: AVCaptureDevice.Position
â”‚
â”œâ”€â”€ å…¬å¼€æ–¹æ³•
â”‚   â”œâ”€â”€ func startSession()
â”‚   â”œâ”€â”€ func stopSession()
â”‚   â”œâ”€â”€ func switchCamera()
â”‚   â””â”€â”€ func takePhoto()
â”‚
â””â”€â”€ çº¿ç¨‹å¤„ç†
    â”œâ”€â”€ ç›¸æœºæ“ä½œ: DispatchQueue (ä¸“ç”¨ä¸²è¡Œé˜Ÿåˆ—)
    â””â”€â”€ UIæ›´æ–°: @Published (ä¸»çº¿ç¨‹)

CameraViewModel
â”œâ”€â”€ æŒæœ‰ CameraService
â”œâ”€â”€ æ¡¥æ¥ UI å’Œ Service
â””â”€â”€ å¤„ç†æ‹ç…§æŒ‰é’®çŠ¶æ€

CameraPreviewView
â””â”€â”€ UIViewRepresentable åŒ…è£… AVCaptureVideoPreviewLayer
```

### 4.3 å¥¶é¾™æ¨¡å—æ¶æ„

```
DragonState (Model)
â”œâ”€â”€ çŠ¶æ€å±æ€§
â”‚   â”œâ”€â”€ isBlinking: Bool
â”‚   â”œâ”€â”€ isJumping: Bool
â”‚   â”œâ”€â”€ isThumbsUp: Bool
â”‚   â””â”€â”€ currentGlowColor: Color?
â”‚
â””â”€â”€ å¯é€‰: ç¬¦åˆ ObservableObject (è‹¥éœ€è¦è·¨ç»„ä»¶å…±äº«)

DragonAnimator (ViewModel)
â”œâ”€â”€ @Published var state: DragonState
â”œâ”€â”€ åŠ¨ç”»æ§åˆ¶æ–¹æ³•
â”‚   â”œâ”€â”€ triggerTap() â†’ çœ¨çœ¼+å°è·³
â”‚   â”œâ”€â”€ triggerCapture() â†’ æ¯”èµ
â”‚   â””â”€â”€ updateGlowColor(_:)
â”‚
â””â”€â”€ ä½¿ç”¨ TimelineView æˆ– Animation è°ƒåº¦

DragonView (Viewå®¹å™¨)
â”œâ”€â”€ ç»„è£…å­ç»„ä»¶
â”‚   â”œâ”€â”€ DragonFaceView
â”‚   â”œâ”€â”€ DragonBodyView
â”‚   â”œâ”€â”€ DragonEyeView (å¤ç”¨)
â”‚   â””â”€â”€ LanternView
â”‚
â”œâ”€â”€ çŠ¶æ€ç»‘å®š
â”‚   â””â”€â”€ @StateObject var animator = DragonAnimator()
â”‚
â””â”€â”€ ç‚¹å‡»äº‹ä»¶ â†’ animator.triggerTap()

LanternView (View)
â”œâ”€â”€ è§†è§‰å…ƒç´ 
â”‚   â”œâ”€â”€ ç¯ç¬¼ä¸»ä½“ (è‡ªå®šä¹‰ Shape æˆ– Image)
â”‚   â”œâ”€â”€ æµè‹ (VStack + Rectangle)
â”‚   â”œâ”€â”€ æç»³ (Rectangle)
â”‚   â””â”€â”€ å…‰æ™• (Circle + blur)
â”‚
â”œâ”€â”€ åŠ¨ç”»
â”‚   â”œâ”€â”€ æ‘‡æ™ƒ: .rotationEffect + Animation.repeatForever
â”‚   â”œâ”€â”€ ç‚¹å‡»å‘å…‰: .opacity + Animation
â”‚   â””â”€â”€ é¦–æ¬¡é—ªçƒ: .onAppear + å»¶æ—¶ä»»åŠ¡
â”‚
â””â”€â”€ äº¤äº’
    â”œâ”€â”€ onTapGesture â†’ NotificationCenter.post(.showSettings)
    â””â”€â”€ HapticService.shared.lightImpact()

SealView (View)
â”œâ”€â”€ è§†è§‰å…ƒç´ 
â”‚   â”œâ”€â”€ åœ†å½¢èƒŒæ™¯ (æœ±ç ‚çº¢)
â”‚   â”œâ”€â”€ é‡‘è‰²è¾¹æ¡† (stroke)
â”‚   â””â”€â”€ ç¹ä½“"é¾"å­— (Text + STKaiti font)
â”‚
â”œâ”€â”€ äº¤äº’
â”‚   â”œâ”€â”€ .buttonStyle (è‡ªå®šä¹‰)
â”‚   â”œâ”€â”€ .scaleEffect ç‚¹å‡»åé¦ˆ
â”‚   â””â”€â”€ onTapGesture â†’ æ˜¾ç¤ºè®¾ç½®èœå•
â”‚
â””â”€â”€ ä½ç½®: ä¸»ç•Œé¢å³ä¸Šè§’
```

### 4.4 è®¾ç½®æ¨¡å—æ¶æ„

```
SettingsService (å•ä¾‹)
â”œâ”€â”€ èŒè´£
â”‚   â”œâ”€â”€ UserDefaults å°è£…
â”‚   â”œâ”€â”€ ç±»å‹å®‰å…¨çš„å­˜å‚¨/è¯»å–
â”‚   â””â”€â”€ æä¾›é»˜è®¤å€¼
â”‚
â”œâ”€â”€ å­˜å‚¨é¡¹
â”‚   â”œâ”€â”€ selectedColorIndex: Int
â”‚   â”œâ”€â”€ brightness: Double
â”‚   â”œâ”€â”€ volumeKeyShutter: Bool
â”‚   â”œâ”€â”€ saveOriginal: Bool
â”‚   â””â”€â”€ gestureBrightness: Bool
â”‚
â””â”€â”€ API
    â”œâ”€â”€ func set<T: Codable>(key: Key, value: T?)
    â””â”€â”€ func get<T: Codable>(key: Key) -> T?

SettingsMenu (View)
â”œâ”€â”€ å±•ç¤ºæ–¹å¼
â”‚   â”œâ”€â”€ .overlay + ZStack
â”‚   â”œâ”€â”€ èƒŒæ™¯æ¨¡ç³Š + .blur
â”‚   â””â”€â”€ å¼¹å‡ºåŠ¨ç”»: .scaleEffect + .opacity
â”‚
â”œâ”€â”€ å†…å®¹åŒº
â”‚   â”œâ”€â”€ æ¯›ç»ç’ƒèƒŒæ™¯: Material.ultraThinMaterial
â”‚   â”œâ”€â”€ åˆ†ç»„è®¾ç½®é¡¹
â”‚   â””â”€â”€ NavigationLink (iOS 16 å…¼å®¹)
â”‚
â””â”€â”€ å…³é—­æ–¹å¼
    â”œâ”€â”€ ç‚¹å‡»é®ç½©
    â””â”€â”€ å¤–éƒ¨æ§åˆ¶ @Binding

SettingsViewModel
â”œâ”€â”€ @Published var settings: Settings
â”œâ”€â”€ åŠ è½½/ä¿å­˜é€»è¾‘
â””â”€â”€ ä¸ SettingsService äº¤äº’
```

### 4.5 è¡¥å…‰æ¨¡å—æ¶æ„

```
LightColor (Model)
â”œâ”€â”€ å±æ€§
â”‚   â”œâ”€â”€ id: Int
â”‚   â”œâ”€â”€ name: String
â”‚   â”œâ”€â”€ hexValue: String
â”‚   â”œâ”€â”€ temperature: ColorTemperature (enum)
â”‚   â””â”€â”€ description: String
â”‚
â”œâ”€â”€ è®¡ç®—å±æ€§
â”‚   â””â”€â”€ var color: Color (ä» hexValue)
â”‚
â””â”€â”€ é™æ€æ•°æ®
    â””â”€â”€ let colors: [LightColor] (8ç§å›½æ½®è‰²)

LightViewModel (ObservableObject)
â”œâ”€â”€ @Published var selectedColor: LightColor
â”œâ”€â”€ @Published var brightness: Double (0-1)
â”œâ”€â”€ @Published var allColors: [LightColor]
â”‚
â”œâ”€â”€ æ–¹æ³•
â”‚   â”œâ”€â”€ func selectColor(_: LightColor)
â”‚   â”œâ”€â”€ func setBrightness(_: Double)
â”‚   â””â”€â”€ private func saveSettings()
â”‚
â””â”€â”€ åˆå§‹åŒ–æ—¶ä» SettingsService åŠ è½½

LightColorPicker (View)
â”œâ”€â”€ LazyVGrid (4åˆ—)
â”‚   â””â”€â”€ ForEach(colors) â†’ ColorGridCell
â”‚
â”œâ”€â”€ é€‰ä¸­çŠ¶æ€
â”‚   â””â”€â”€ è¾¹æ¡†é«˜äº® (stroke)
â”‚
â””â”€â”€ ç‚¹å‡»å›è°ƒ â†’ viewModel.selectColor

BrightnessSlider (View)
â”œâ”€â”€ GeometryReader è·å–å®½åº¦
â”œâ”€â”€ ZStack å åŠ 
â”‚   â”œâ”€â”€ è½¨é“ (èƒŒæ™¯)
â”‚   â”œâ”€â”€ è¿›åº¦æ¡ (å‰æ™¯)
â”‚   â””â”€â”€ æ»‘å— (Circle + æ‰‹åŠ¿)
â”‚
â””â”€â”€ DragGesture å¤„ç†æ‹–åŠ¨
```

### 4.6 è§¦è§‰åé¦ˆæœåŠ¡

```
HapticService (å•ä¾‹)
â”œâ”€â”€ é¢„åˆå§‹åŒ– Generator
â”‚   â”œâ”€â”€ impactLight: UIImpactFeedbackGenerator
â”‚   â”œâ”€â”€ impactMedium: UIImpactFeedbackGenerator
â”‚   â”œâ”€â”€ impactHeavy: UIImpactFeedbackGenerator
â”‚   â””â”€â”€ notification: UINotificationFeedbackGenerator
â”‚
â”œâ”€â”€ Impact API
â”‚   â”œâ”€â”€ func lightImpact()
â”‚   â”œâ”€â”€ func mediumImpact()
â”‚   â””â”€â”€ func heavyImpact()
â”‚
â”œâ”€â”€ Notification API
â”‚   â”œâ”€â”€ func success()
â”‚   â”œâ”€â”€ func warning()
â”‚   â””â”€â”€ func error()
â”‚
â””â”€â”€ Selection API
    â””â”€â”€ func selectionChanged()

ä½¿ç”¨åœºæ™¯
â”œâ”€â”€ ç‚¹å‡»é¢œè‰²/ç¯ç¬¼ â†’ lightImpact()
â”œâ”€â”€ æ‹ç…§æˆåŠŸ â†’ mediumImpact()
â”œâ”€â”€ è®¾ç½®åˆ‡æ¢ â†’ selectionChanged()
â””â”€â”€ é”™è¯¯æç¤º â†’ error()
```

---

## äº”ã€åŠ¨ç”»è®¾è®¡

### 5.1 åŠ¨ç”»æŠ€æœ¯é€‰å‹

```
åŠ¨ç”»ç±»å‹ â†’ æŠ€æœ¯æ–¹æ¡ˆ
â”œâ”€â”€ ç®€å•è¿‡æ¸¡ â†’ SwiftUI Animation (.easeInOut, .spring)
â”œâ”€â”€ å¾ªç¯åŠ¨ç”» â†’ Animation.repeatForever
â”œâ”€â”€ æ‰‹åŠ¿é©±åŠ¨ â†’ DragGesture + å®æ—¶æ›´æ–°
â”œâ”€â”€ ç»„åˆåŠ¨ç”» â†’ withAnimation + Group
â”œâ”€â”€ å¸§åŠ¨ç”» â†’ @State å¸§ç´¢å¼• + Timer
â””â”€â”€ å¤æ‚åŠ¨ç”» â†’ Core Animation (UIKit)
```

### 5.2 æ ¸å¿ƒåŠ¨ç”»è®¾è®¡

```
ç¯ç¬¼æ‘‡æ™ƒ (å¾ªç¯åŠ¨ç”»)
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ .rotationEffect(.degrees(å€¼))
â”‚   â”œâ”€â”€ Animation.easeInOut(duration: 2).repeatForever(autoreverses: true)
â”‚   â””â”€â”€ @State é©±åŠ¨è§’åº¦å˜åŒ–
â”‚
â””â”€â”€ å®ç°: LanternView ä¸­ @State private var shakeAngle

ç¯ç¬¼å‘å…‰ (ç‚¹å‡»åé¦ˆ)
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ Circle().opacity() è°ƒæ•´é€æ˜åº¦
â”‚   â”œâ”€â”€ .blur() è°ƒæ•´æ¨¡ç³ŠåŠå¾„
â”‚   â””â”€â”€ withAnimation(.easeOut(duration: 0.2))
â”‚
â””â”€â”€ å®ç°: @State private var isGlowing: Bool

å¥¶é¾™çœ¨çœ¼ (å¸§åŠ¨ç”»)
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ A (å›¾ç‰‡)
â”‚   â”œâ”€â”€ Image("dragon_blink_\(frameIndex)")
â”‚   â”œâ”€â”€ Timer æ¯ç§’åˆ‡æ¢å¸§
â”‚   â””â”€â”€ æ€»æ—¶é•¿ 200ms
â”‚
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ B (ç»˜å›¾)
â”‚   â”œâ”€â”€ EyeView.isBlinking: Bool
â”‚   â”œâ”€â”€ if isBlinking { é—­çœ¼çº¿æ¡ } else { ççœ¼åœ†å½¢ }
â”‚   â””â”€â”€ withAnimation(.linear(duration: 0.1))
â”‚
â””â”€â”€ æ¨è: æ–¹æ¡ˆ B (æ›´çµæ´»ï¼Œæ€§èƒ½å¥½)

å¥¶é¾™å°è·³ (å¼¹æ€§åŠ¨ç”»)
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ .offset(y: è´Ÿå€¼) + .scaleEffect
â”‚   â”œâ”€â”€ Animation.spring(response: 0.3, dampingFraction: 0.6)
â”‚   â””â”€â”€ ä¸´æ—¶ä¿®æ”¹åæ¢å¤
â”‚
â””â”€â”€ å®ç°: @State private var isJumping: Bool

èœå•å±•å¼€ (å¼¹å‡ºåŠ¨ç”»)
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ .scaleEffect(isPresented ? 1 : 0.8)
â”‚   â”œâ”€â”€ .opacity(isPresented ? 1 : 0)
â”‚   â”œâ”€â”€ Animation.spring(response: 0.3, dampingFraction: 0.7)
â”‚   â””â”€â”€ èƒŒæ™¯æ¨¡ç³Š: .blur(radius: isPresented ? 20 : 0)
â”‚
â””â”€â”€ å®ç°: @Binding var isPresented: Bool

é¢œè‰²åˆ‡æ¢ (æ¸å˜è¿‡æ¸¡)
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ ZStack å åŠ å¤šå±‚ Color
â”‚   â”œâ”€â”€ .opacity() æ§åˆ¶æ˜¾ç¤º
â”‚   â””â”€â”€ Animation.easeInOut(duration: 0.3)
â”‚
â””â”€â”€ æ›¿ä»£æ–¹æ¡ˆ: .animation(.easeInOut, value: selectedColor)

å°ç« ç‚¹å‡» (ç¼©æ”¾åé¦ˆ)
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ .scaleEffect(isPressed ? 0.95 : 1.0)
â”‚   â”œâ”€â”€ Animation.spring(response: 0.15)
â”‚   â””â”€â”€ @State var isPressed: Bool
â”‚
â””â”€â”€ å»¶æ—¶æ¢å¤: DispatchQueue.main.asyncAfter
```

### 5.3 åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–

```
ä¼˜åŒ–ç­–ç•¥
â”œâ”€â”€ ä½¿ç”¨ drawingGroup() åˆå¹¶æ¸²æŸ“
â”‚   â””â”€â”€ å¤æ‚è§†å›¾ â†’ ç¦»å±æ¸²æŸ“ â†’ GPUåˆæˆ
â”‚
â”œâ”€â”€ é¿å…åŠ¨ç”»ä¸­ä¿®æ”¹å¸ƒå±€
â”‚   â””â”€â”€ ä½¿ç”¨ .scaleEffect / .offset æ›¿ä»£ frame æ”¹å˜
â”‚
â”œâ”€â”€ å‡å°‘ @Published æ›´æ–°é¢‘ç‡
â”‚   â””â”€â”€ åˆå¹¶çŠ¶æ€æ›´æ–°ï¼Œä½¿ç”¨ debounce
â”‚
â”œâ”€â”€ ä½ç”µé‡æ¨¡å¼é™çº§
â”‚   â””â”€â”€ ProcessInfo.processInfo.isLowPowerModeEnabled
â”‚
â””â”€â”€ åŠ¨ç”»å¸§ç‡æ§åˆ¶
    â””â”€â”€ é UI çº¿ç¨‹è®¡ç®—ï¼Œä¸»çº¿ç¨‹åªè´Ÿè´£æ¸²æŸ“
```

---

## å…­ã€å¯¼èˆªä¸è·¯ç”±

### 6.1 å¯¼èˆªæ–¹æ¡ˆ (iOS 16)

```
ä¸»ç•Œé¢ â†’ è®¾ç½®èœå•
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ .overlay + ZStack
â”‚   â”œâ”€â”€ @Binding var showSettings: Bool
â”‚   â””â”€â”€ æ‰‹åŠ¨æ§åˆ¶æ˜¾ç¤º/éšè—
â”‚
â””â”€â”€ ä¼˜åŠ¿: æ›´çµæ´»çš„åŠ¨ç”»æ§åˆ¶

ä¸»ç•Œé¢ â†’ å…³äºæˆ‘ä»¬
â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ NavigationView + NavigationLink
â”‚   â”œâ”€â”€ iOS 16 æ ‡å‡† API
â”‚   â””â”€â”€ è‡ªåŠ¨ç®¡ç†å¯¼èˆªæ ˆ
â”‚
â””â”€â”€ ä»£ç ç¤ºä¾‹
    NavigationView {
        MainView()
            .navigationTitle("å¥¶é¾™è¡¥å…‰ç¯")
    }
```

### 6.2 çŠ¶æ€ä¼ é€’

```
çˆ¶å­ç»„ä»¶é€šä¿¡
â”œâ”€â”€ çˆ¶ â†’ å­: @Binding
â”‚   â””â”€â”€ å­è§†å›¾ä¿®æ”¹çˆ¶è§†å›¾çŠ¶æ€
â”‚
â”œâ”€â”€ å­ â†’ çˆ¶: Closure å›è°ƒ
â”‚   â””â”€â”€ onTap: () -> Void
â”‚
â””â”€â”€ å…„å¼Ÿç»„ä»¶: å…±äº« ViewModel
    â””â”€â”€ @StateObject åœ¨çˆ¶ç»„ä»¶æ³¨å…¥
```

---

## ä¸ƒã€æ•°æ®æŒä¹…åŒ–

### 7.1 å­˜å‚¨æ–¹æ¡ˆ

```
UserDefaults (è½»é‡çº§)
â”œâ”€â”€ é€‚ç”¨åœºæ™¯
â”‚   â”œâ”€â”€ ç”¨æˆ·åå¥½è®¾ç½®
â”‚   â”œâ”€â”€ æœ€åé€‰æ‹©çš„é¢œè‰²
â”‚   â””â”€â”€ äº®åº¦å€¼
â”‚
â”œâ”€â”€ å­˜å‚¨é”®è®¾è®¡ (enum)
â”‚   â””â”€â”€ enum SettingsKey: String, CaseIterable
â”‚       â”œâ”€â”€ case selectedColorIndex
â”‚       â”œâ”€â”€ case brightness
â”‚       â””â”€â”€ case volumeKeyShutter
â”‚
â””â”€â”€ SettingsService å°è£…
    â”œâ”€â”€ ç±»å‹å®‰å…¨ get/set
    â””â”€â”€ æä¾›é»˜è®¤å€¼

Fileç³»ç»Ÿ (å¯é€‰)
â”œâ”€â”€ é€‚ç”¨åœºæ™¯
â”‚   â”œâ”€â”€ æ‹æ‘„çš„ç…§ç‰‡
â”‚   â””â”€â”€ ç¼“å­˜çš„èµ„æº
â”‚
â””â”€â”€ è·¯å¾„: FileManager.default.urls(for: .documentDirectory)
```

---

## å…«ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 8.1 æ¸²æŸ“ä¼˜åŒ–

```
ç¦»å±æ¸²æŸ“ (drawingGroup)
â”œâ”€â”€ ä½¿ç”¨åœºæ™¯
â”‚   â”œâ”€â”€ å¤æ‚çš„å¥¶é¾™è§†å›¾
â”‚   â”œâ”€â”€ å¤šå±‚å åŠ æ•ˆæœ
â”‚   â””â”€â”€ é¢‘ç¹æ›´æ–°çš„åŠ¨ç”»
â”‚
â””â”€â”€ å®ç°
    DragonView()
        .drawingGroup()  // åˆå¹¶ä¸ºå•ä¸€çº¹ç†

å‡å°‘è§†å›¾å±‚çº§
â”œâ”€â”€ é¿å…è¿‡æ·±åµŒå¥—
â”‚   â””â”€â”€ ä½¿ç”¨ @ViewBuilder æ‰å¹³åŒ–
â”‚
â””â”€â”€ ä½¿ç”¨ LazyVStack/LazyHGrid
    â””â”€â”€ å»¶è¿ŸåŠ è½½å±å¹•å¤–å†…å®¹
```

### 8.2 å†…å­˜ä¼˜åŒ–

```
å›¾ç‰‡èµ„æºä¼˜åŒ–
â”œâ”€â”€ ä½¿ç”¨ Assets.xcassets
â”‚   â””â”€â”€ è‡ªåŠ¨ç®¡ç† @1x, @2x, @3x
â”‚
â”œâ”€â”€ é€‚æ—¶é‡Šæ”¾
â”‚   â””â”€â”€ .onDisappear { æ¸…ç†èµ„æº }
â”‚
â””â”€â”€ é¿å…å¾ªç¯å¼•ç”¨
    â””â”€â”€ weak self / unowned self
```

### 8.3 ç”µæ± ä¼˜åŒ–

```
ä½ç”µé‡æ¨¡å¼é€‚é…
â”œâ”€â”€ æ£€æµ‹
â”‚   â””â”€â”€ ProcessInfo.processInfo.isLowPowerModeEnabled
â”‚
â”œâ”€â”€ ç­–ç•¥
â”‚   â”œâ”€â”€ é™ä½åŠ¨ç”»é¢‘ç‡
â”‚   â”œâ”€â”€ å‡å°‘æ¨¡ç³Šæ•ˆæœ
â”‚   â””â”€â”€ é™ä½å¸§ç‡
â”‚
â””â”€â”€ ç¤ºä¾‹
    LanternView()
        .rotationEffect(
            degrees: isLowPowerMode ? 0 : shakeAngle
        )
```

### 8.4 å¯åŠ¨ä¼˜åŒ–

```
å¯åŠ¨æ—¶é—´ä¼˜åŒ–
â”œâ”€â”€ å»¶è¿Ÿåˆå§‹åŒ–
â”‚   â””â”€â”€ Service ä½¿ç”¨ lazy var
â”‚
â”œâ”€â”€ å¼‚æ­¥åŠ è½½
â”‚   â””â”€â”€ éå…³é”®èµ„æºåå°åŠ è½½
â”‚
â””â”€â”€ é¢„åŠ è½½
    â””â”€â”€ ç›¸æœºæƒé™è¯·æ±‚æå‰è§¦å‘
```

---

## ä¹ã€å¼€å‘è§„èŒƒ

### 9.1 å‘½åè§„èŒƒ

```
ç±»å‹å‘½å (å¤§é©¼å³°)
â”œâ”€â”€ class DragonViewModel { }
â”œâ”€â”€ struct LightColor { }
â”œâ”€â”€ enum ColorTemperature { }
â””â”€â”€ protocol LightServiceProtocol { }

å˜é‡/å‡½æ•° (å°é©¼å³°)
â”œâ”€â”€ var selectedColor: Color
â”œâ”€â”€ let MAX_BRIGHTNESS = 1.0
â””â”€â”€ func selectColor(_ color: LightColor)

ç§æœ‰æˆå‘˜ (å‰ç¼€_)
â”œâ”€â”€ private var _animator: DragonAnimator?
â””â”€â”€ private func _updateAnimation()

å¸¸é‡ (å…¨å¤§å†™)
â””â”€â”€ static let DEFAULT_BRIGHTNESS: Double = 0.75

MARK ä½¿ç”¨
â”œâ”€â”€ // MARK: - Properties
â”œâ”€â”€ // MARK: - Public Methods
â”œâ”€â”€ // MARK: - Private Methods
â””â”€â”€ // MARK: - Nested Types
```

### 9.2 æ–‡ä»¶ç»„ç»‡

```
æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ æ–‡ä»¶å¤´æ³¨é‡Š
â”œâ”€â”€ import è¯­å¥ (åˆ†ç»„æ’åº)
â”œâ”€â”€ MARK åˆ†ç»„
â”‚   â”œâ”€â”€ Properties
â”‚   â”œâ”€â”€ Initialization
â”‚   â”œâ”€â”€ Public Methods
â”‚   â”œâ”€â”€ Private Methods
â”‚   â””â”€â”€ Nested Types
â””â”€â”€ Preview (ä»… View)
```

### 9.3 ä»£ç é£æ ¼

```
SwiftUI ä»£ç é£æ ¼
â”œâ”€â”€ ä½¿ç”¨ @ViewBuilder ç»„åˆè§†å›¾
â”œâ”€â”€ é—­åŒ…å‚æ•°å°¾éš
â”œâ”€â”€ é“¾å¼ä¿®é¥°ç¬¦åˆ†ç»„
â”‚   â””â”€â”€ çŠ¶æ€ç›¸å…³ / å¸ƒå±€ç›¸å…³ / æ ·å¼ç›¸å…³
â””â”€â”€ é¿å…è¿‡é•¿çš„ View (æ‹†åˆ†å­ç»„ä»¶)

ç¤ºä¾‹
struct GoodView: View {
    @State private var isActive = false

    var body: some View {
        VStack {
            content
        }
        .background(backgroundView)
        .modifier(styleModifier)
    }

    private var content: some View { }
    private var backgroundView: some View { }
}
```

### 9.4 Git æäº¤è§„èŒƒ

```
æ ¼å¼: <type>: <subject>

type ç±»å‹
â”œâ”€â”€ feat: æ–°åŠŸèƒ½
â”œâ”€â”€ fix: Bugä¿®å¤
â”œâ”€â”€ docs: æ–‡æ¡£æ›´æ–°
â”œâ”€â”€ style: ä»£ç æ ¼å¼
â”œâ”€â”€ refactor: é‡æ„
â”œâ”€â”€ perf: æ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ test: æµ‹è¯•ç›¸å…³
â””â”€â”€ chore: æ„å»º/å·¥å…·

ç¤ºä¾‹
â”œâ”€â”€ feat: æ·»åŠ ç¯ç¬¼æ‘‡æ™ƒåŠ¨ç”»
â”œâ”€â”€ fix: ä¿®å¤ç›¸æœºåˆ‡æ¢å´©æºƒé—®é¢˜
â”œâ”€â”€ perf: ä¼˜åŒ–å¥¶é¾™è§†å›¾æ¸²æŸ“æ€§èƒ½
â””â”€â”€ docs: æ›´æ–°æ¶æ„è®¾è®¡æ–‡æ¡£
```

---

## åã€æµ‹è¯•ç­–ç•¥

### 10.1 å•å…ƒæµ‹è¯•

```
æµ‹è¯•èŒƒå›´
â”œâ”€â”€ Model æµ‹è¯•
â”‚   â””â”€â”€ LightColor æ•°æ®ç»“æ„
â”‚
â”œâ”€â”€ ViewModel æµ‹è¯•
â”‚   â”œâ”€â”€ LightViewModel çŠ¶æ€å˜åŒ–
â”‚   â””â”€â”€ SettingsViewModel åŠ è½½/ä¿å­˜
â”‚
â””â”€â”€ Service æµ‹è¯•
    â”œâ”€â”€ SettingsService å­˜å–é€»è¾‘
    â””â”€â”€ HapticService è°ƒç”¨éªŒè¯
```

### 10.2 UIæµ‹è¯•

```
æµ‹è¯•åœºæ™¯
â”œâ”€â”€ é¢œè‰²é€‰æ‹©äº¤äº’
â”œâ”€â”€ äº®åº¦è°ƒèŠ‚
â”œâ”€â”€ è®¾ç½®èœå•å¼€å…³
â””â”€â”€ æ‹ç…§æŒ‰é’®ç‚¹å‡»

å·¥å…·
â””â”€â”€ XCTest + XCUITest
```

---

## åä¸€ã€å¼€å‘è®¡åˆ’

### 11.1 è¿­ä»£è§„åˆ’

```
Week 1: åŸºç¡€æ¶æ„ + æ ¸å¿ƒåŠŸèƒ½
â”œâ”€â”€ Day 1-2: é¡¹ç›®æ­å»º + è®¾è®¡ç³»ç»Ÿ
â”‚   â”œâ”€â”€ åˆ›å»º Xcode é¡¹ç›®
â”‚   â”œâ”€â”€ å®ç° AppDesign è®¾è®¡è§„èŒƒ
â”‚   â”œâ”€â”€ åˆ›å»ºåŸºç¡€ View æ‰©å±•
â”‚   â””â”€â”€ æ­å»ºé¡¹ç›®ç»“æ„
â”‚
â”œâ”€â”€ Day 3-5: è¡¥å…‰æ¨¡å—
â”‚   â”œâ”€â”€ LightColor Model
â”‚   â”œâ”€â”€ LightViewModel
â”‚   â”œâ”€â”€ LightColorPicker (LazyVGrid)
â”‚   â”œâ”€â”€ BrightnessSlider (DragGesture)
â”‚   â””â”€â”€ è®¾ç½®ä¿å­˜/åŠ è½½
â”‚
â””â”€â”€ Day 6-7: ç›¸æœºåŸºç¡€åŠŸèƒ½
    â”œâ”€â”€ CameraService (AVFoundation)
    â”œâ”€â”€ CameraViewModel
    â”œâ”€â”€ CameraPreviewView (UIViewRepresentable)
    â””â”€â”€ æ‹ç…§åŠŸèƒ½

Week 2: è§’è‰²ä¸åŠ¨ç”»
â”œâ”€â”€ Day 8-10: å¥¶é¾™è§’è‰²
â”‚   â”œâ”€â”€ DragonView å®¹å™¨
â”‚   â”œâ”€â”€ DragonFace + DragonEye
â”‚   â”œâ”€â”€ DragonBody + DragonHorn
â”‚   â”œâ”€â”€ çœ¨çœ¼åŠ¨ç”»
â”‚   â””â”€â”€ å°è·³åŠ¨ç”»
â”‚
â”œâ”€â”€ Day 11-12: ç¯ç¬¼ä¸å°ç« 
â”‚   â”œâ”€â”€ LanternView (è‡ªå®šä¹‰ç»˜åˆ¶)
â”‚   â”œâ”€â”€ ç¯ç¬¼æ‘‡æ™ƒåŠ¨ç”»
â”‚   â”œâ”€â”€ ç‚¹å‡»å‘å…‰æ•ˆæœ
â”‚   â”œâ”€â”€ SealView (ç¹ä½“é¾å­—)
â”‚   â””â”€â”€ ç‚¹å‡»åé¦ˆ
â”‚
â””â”€â”€ Day 13-14: äº¤äº’é›†æˆ
    â”œâ”€â”€ è®¾ç½®èœå•
    â”œâ”€â”€ è§¦è§‰åé¦ˆé›†æˆ
    â””â”€â”€ åŒé‡å…¥å£è”åŠ¨

Week 3: ä¼˜åŒ–ä¸æµ‹è¯•
â”œâ”€â”€ Day 15-16: åŠ¨ç”»ä¼˜åŒ–
â”‚   â”œâ”€â”€ drawingGroup ä¼˜åŒ–
â”‚   â”œâ”€â”€ æ€§èƒ½åˆ†æ
â”‚   â””â”€â”€ ä½ç”µé‡æ¨¡å¼é€‚é…
â”‚
â”œâ”€â”€ Day 17-18: åŠŸèƒ½å®Œå–„
â”‚   â”œâ”€â”€ éŸ³é‡é”®æ‹ç…§
â”‚   â”œâ”€â”€ ä¿å­˜åŸå›¾
â”‚   â”œâ”€â”€ æ‰‹åŠ¿è°ƒèŠ‚äº®åº¦
â”‚   â””â”€â”€ åœºæ™¯é¢„è®¾
â”‚
â”œâ”€â”€ Day 19-20: æµ‹è¯•ä¿®å¤
â”‚   â”œâ”€â”€ å•å…ƒæµ‹è¯•ç¼–å†™
â”‚   â”œâ”€â”€ UI æµ‹è¯•
â”‚   â”œâ”€â”€ Bug ä¿®å¤
â”‚   â””â”€â”€ æ€§èƒ½ä¼˜åŒ–
â”‚
â””â”€â”€ Day 21: æ‰“åŒ…ä¸Šæ¶å‡†å¤‡
    â”œâ”€â”€ App Store æˆªå›¾
    â”œâ”€â”€ åº”ç”¨æè¿°
    â”œâ”€â”€ éšç§æ”¿ç­–
    â””â”€â”€ æäº¤å®¡æ ¸
```

### 11.2 é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | äº¤ä»˜ç‰© | å®Œæˆæ ‡å‡† |
|--------|--------|----------|
| M1 | é¡¹ç›®æ¶æ„ + è®¾è®¡ç³»ç»Ÿ | é¡¹ç›®å¯è¿è¡Œï¼Œè®¾è®¡è§„èŒƒå¯ç”¨ |
| M2 | è¡¥å…‰åŠŸèƒ½ | 8ç§é¢œè‰²å¯åˆ‡æ¢ï¼Œäº®åº¦å¯è°ƒèŠ‚ |
| M3 | ç›¸æœºåŠŸèƒ½ | å‰åç½®åˆ‡æ¢ï¼Œæ‹ç…§ä¿å­˜ |
| M4 | å¥¶é¾™ + ç¯ç¬¼ | è§’è‰²æ˜¾ç¤ºï¼ŒåŠ¨ç”»æµç•… |
| M5 | è®¾ç½®èœå• | åŒé‡å…¥å£å¯æ‰“å¼€è®¾ç½® |
| M6 | æµ‹è¯•å®Œæˆ | æ— P0/P1çº§åˆ«Bug |

---

## åäºŒã€é£é™©ä¸åº”å¯¹

### 12.1 æŠ€æœ¯é£é™©

```
é£é™©é¡¹
â”œâ”€â”€ iOS 16 å…¼å®¹æ€§
â”‚   â””â”€â”€ åº”å¯¹: å……åˆ†æµ‹è¯•ï¼Œé¿å…ä½¿ç”¨ iOS 17 ç‰¹æ€§
â”‚
â”œâ”€â”€ ç›¸æœºæ€§èƒ½é—®é¢˜
â”‚   â””â”€â”€ åº”å¯¹: ä½¿ç”¨ä¸“ç”¨ä¸²è¡Œé˜Ÿåˆ—ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹
â”‚
â”œâ”€â”€ åŠ¨ç”»å¡é¡¿
â”‚   â””â”€â”€ åº”å¯¹: drawingGroup ä¼˜åŒ–ï¼Œå‡å°‘è§†å›¾å±‚çº§
â”‚
â””â”€â”€ å†…å­˜æ³„æ¼
    â””â”€â”€ åº”å¯¹: Instruments åˆ†æï¼Œweak self å¤„ç†é—­åŒ…
```

### 12.2 å¼€å‘é£é™©

```
é£é™©é¡¹
â”œâ”€â”€ ç¾æœ¯èµ„æºç¼ºå¤±
â”‚   â””â”€â”€ åº”å¯¹: ä½¿ç”¨ä»£ç ç»˜åˆ¶å ä½ï¼Œåç»­æ›¿æ¢
â”‚
â”œâ”€â”€ è‡ªå®šä¹‰å­—ä½“åŠ è½½å¤±è´¥
â”‚   â””â”€â”€ åº”å¯¹: æä¾›ç³»ç»Ÿå­—ä½“é™çº§æ–¹æ¡ˆ
â”‚
â””â”€â”€ æ€§èƒ½ä¸è¾¾æ ‡
    â””â”€â”€ åº”å¯¹: ä½ç”µé‡æ¨¡å¼é™çº§ï¼Œå‡å°‘åŠ¨ç”»å¤æ‚åº¦
```

---

## åä¸‰ã€é™„å½•

### 13.1 å‚è€ƒèµ„æ–™

```
å®˜æ–¹æ–‡æ¡£
â”œâ”€â”€ SwiftUI Documentation (iOS 16)
â”œâ”€â”€ AVFoundation Documentation
â”œâ”€â”€ Core Haptics Documentation
â””â”€â”€ Human Interface Guidelines

è®¾è®¡èµ„æº
â”œâ”€â”€ SF Symbols (iOS 16)
â”œâ”€â”€ Apple Design Resources
â””â”€â”€ Figma iOS 16 Kit

å¼€å‘å·¥å…·
â”œâ”€â”€ Xcode 14.2 Documentation
â”œâ”€â”€ Instruments User Guide
â””â”€â”€ SwiftLint (ä»£ç è§„èŒƒæ£€æŸ¥)
```

### 13.2 å¸¸è§é—®é¢˜

```
Q: SwiftUI åŠ¨ç”»åœ¨ä½ç«¯è®¾å¤‡å¡é¡¿æ€ä¹ˆåŠï¼Ÿ
A: ä½¿ç”¨ drawingGroup() ä¼˜åŒ–ï¼Œé¿å…åŠ¨ç”»ä¸­ä¿®æ”¹å¸ƒå±€

Q: ç›¸æœºé¢„è§ˆæ¨¡ç³Šæˆ–å»¶è¿Ÿï¼Ÿ
A: æ£€æŸ¥ sessionPreset è®¾ç½®ä¸º .photoï¼Œç¡®ä¿åœ¨ä¸»çº¿ç¨‹æ›´æ–° UI

Q: è‡ªå®šä¹‰å­—ä½“ä¸æ˜¾ç¤ºï¼Ÿ
A: æ£€æŸ¥ Info.plist çš„ Fonts provided by application é…ç½®

Q: è§¦è§‰åé¦ˆåœ¨æ¨¡æ‹Ÿå™¨æ— æ•ˆï¼Ÿ
A: è§¦è§‰åé¦ˆä»…åœ¨çœŸæœºæœ‰æ•ˆï¼Œæ¨¡æ‹Ÿå™¨å¯è·³è¿‡æµ‹è¯•

Q: iOS 16 NavigationView è¢«å¼ƒç”¨è­¦å‘Šï¼Ÿ
A: Xcode 14.2 æ”¯æŒ NavigationViewï¼ŒiOS 17 æ‰æ¨è NavigationStack
```

### 13.3 ç‰ˆæœ¬å†å²

```
v1.0 - 2025-12-24
â”œâ”€â”€ åˆå§‹ç‰ˆæœ¬
â”œâ”€â”€ é€‚é… iOS 16.0+
â”œâ”€â”€ Xcode 14.2 å…¼å®¹
â””â”€â”€ å®Œæ•´æ¶æ„è®¾è®¡
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**é€‚ç”¨ç¯å¢ƒ**: macOS 12.7.6 + Xcode 14.2 + iOS 16.0+
**æœ€åæ›´æ–°**: 2025-12-24
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ
